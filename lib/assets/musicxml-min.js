window.MusicXML={},MusicXML.engrave=function(t,e){var r=document.getElementById(t),i=new Vex.Flow.Renderer(r,Vex.Flow.Renderer.Backends.CANVAS),n=i.getContext(),o=new Vex.Flow.Stave(10,0,500);o.setContext(n).draw();var s=new MusicXML.Score(n,e);return s.render(),s},MusicXML.Measure=function(t,e){this.ctx=t,this.notes=e.note.map(function(t){return new MusicXML.Note(t)})},MusicXML.Measure.prototype.render=function(t){var e=new Vex.Flow.Stave(t.x,t.y,200);e.setContext(this.ctx).draw();var r=this.notes.map(function(t){return t.toStaveNote()});Vex.Flow.Formatter.FormatAndDraw(this.ctx,e,r)},MusicXML.MeasurePosition=function(){this.x=10,this.y=0},MusicXML.MeasurePosition.prototype.incr=function(){this.x+=200,810==this.x&&(this.x=10,this.y+=120)},MusicXML.Note=function(t){this.type=t.type,this.pitch=t.pitch},MusicXML.Note.prototype.toStaveNote=function(){return new Vex.Flow.StaveNote({keys:[this.compiledPitch()],duration:this.compiledDuration()})},MusicXML.Note.prototype.compiledDuration=function(){var t;switch(this.type){case"whole":t="w";break;case"half":t="h";break;case"quarter":t="q";break;case"eighth":t="8";break;case"16th":t="16"}return t},MusicXML.Note.prototype.compiledPitch=function(){return this.pitch.step.toLowerCase()+"/"+this.pitch.octave},MusicXML.Part=function(t,e){this.measures=e.measure.map(function(e){return new MusicXML.Measure(t,e)})},MusicXML.Part.prototype.render=function(){var t=new MusicXML.MeasurePosition;this.measures.forEach(function(e){e.render(t),t.incr()})},MusicXML.Score=function(t,e){this.parts=e.scorePartwise.part.map(function(e){return new MusicXML.Part(t,e)})},MusicXML.Score.prototype.render=function(){this.parts.forEach(function(t){t.render()})};